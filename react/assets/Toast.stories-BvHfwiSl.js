import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{r as n}from"./iframe-PNrS-Gz9.js";import{B as b}from"./Button-BZIbAEaV.js";import{r as E}from"./index-Dt3XjlvG.js";import{c as N}from"./index-BwBCBctg.js";import{E as I}from"./ExpandTransition-u--UjscD.js";import{W as c}from"./index-Wf5HUiwc.js";import"./preload-helper-C1FmrZbK.js";import"./style-DhxcUcNZ.js";import"./index-BAUi5aDK.js";import"./index-C9jVCdyr.js";import"./class-map-63b4Tez8.js";const D=".w-toast{--w-toast-color-background: var(--w-s-color-background);--w-toast-color-border: var(--w-s-color-border);--w-toast-color-text: var(--w-s-color-text);--w-toast-color-icon: var(--w-s-color-icon);display:flex;flex-direction:column;position:fixed;bottom:0;overflow:hidden;align-items:center;width:100%;z-index:1000;pointer-events:none}.w-toast__item{display:flex;align-items:start;min-width:328px;max-width:420px;padding:8px 8px 8px 6px;margin-bottom:16px;border:2px solid transparent;border-radius:8px;pointer-events:auto;gap:1px;background-color:var(--_w-toast-background);border-color:var(--_w-toast-border);color:var(--_w-toast-text)}.w-toast__icon{margin:8px;color:var(--_w-toast-icon)}.w-toast__icon>*{display:block}.w-toast__item>p{align-self:center;margin:0 auto 0 0;padding:11px 0;font-size:var(--w-font-size-s);line-height:var(--w-line-height-s)}.w-toast__item{--_w-toast-background: var(--w-toast-background);--_w-toast-border: var(--w-toast-border);--_w-toast-text: var(--w-toast-text);--_w-toast-icon: var(--w-toast-icon)}.w-toast--positive{--w-toast-background: var(--w-s-color-background-positive-subtle);--w-toast-border: var(--w-s-color-border-positive-subtle);--w-toast-icon: var(--w-s-color-icon-positive)}.w-toast--warning{--w-toast-background: var(--w-s-color-background-warning-subtle);--w-toast-border: var(--w-s-color-border-warning-subtle);--w-toast-icon: var(--w-s-color-icon-warning)}.w-toast--negative{--w-toast-background: var(--w-s-color-background-negative-subtle);--w-toast-border: var(--w-s-color-border-negative-subtle);--w-toast-icon: var(--w-s-color-icon-negative)}",C={positive:{class:"w-toast--positive",icon:e.jsx(c,{name:"Success"}),role:"status"},warning:{class:"w-toast--warning",icon:e.jsx(c,{name:"Warning"}),role:"alert"},negative:{class:"w-toast--negative",icon:e.jsx(c,{name:"Error"}),role:"alert"}},T=({variant:t,text:s,dismissible:a=!1,id:o,duration:i})=>{const{icon:m,role:r,class:u}=C[t],[S,p]=n.useState(!1),[j,w]=n.useState(!1);n.useEffect(()=>{p(!0),w(!0),setTimeout(()=>p(!1),i),setTimeout(()=>{w(!1),g(o)},i+400)},[]);const k=N("w-toast__item",u);return e.jsx(I,{show:S,children:e.jsxs("div",{className:k,role:r,id:o,children:[e.jsx("span",{className:"w-toast__icon",children:m}),j&&e.jsx("p",{children:s}),a&&e.jsx(b,{variant:"overlayQuiet",size:"small",hasIconOnly:!0,onClick:()=>g(o),children:e.jsx(c,{name:"Close",size:"small",style:{marginTop:4}})})]})})};T.__docgenInfo={description:"",methods:[],displayName:"ToastItem",props:{variant:{required:!0,tsType:{name:"union",raw:"'positive' | 'warning' | 'negative'",elements:[{name:"literal",value:"'positive'"},{name:"literal",value:"'warning'"},{name:"literal",value:"'negative'"}]},description:""},duration:{required:!1,tsType:{name:"union",raw:"5000 | 10000 | 6000000",elements:[{name:"literal",value:"5000"},{name:"literal",value:"10000"},{name:"literal",value:"6000000"}]},description:""},text:{required:!0,tsType:{name:"string"},description:""},dismissible:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},id:{required:!0,tsType:{name:"string"},description:""}}};const O=()=>Date.now().toString(36)+Math.random().toString(36).slice(2,5),h=()=>JSON.parse(sessionStorage.getItem("wtoasts")||"[]"),d=t=>{sessionStorage.setItem("wtoasts",JSON.stringify(t))},V=5e3,y=(t,s)=>{window==null||window.dispatchEvent(new StorageEvent("storage",{key:"wtoasts",newValue:JSON.stringify(s),oldValue:JSON.stringify(t),storageArea:sessionStorage}))},g=t=>{const s=h(),a=s.filter(o=>o.id!==t);d(a),y(s,a)},q=t=>{const s={...t,duration:t.duration||V,id:O()},a=h(),o=[...a,s];d(o),y(a,o)},_=()=>{const[t,s]=n.useState([]),a=o=>{if(o.key==="wtoasts"){const i=JSON.parse(o.newValue||"[]");s(i)}};return n.useEffect(()=>(window==null||window.addEventListener("storage",a),window==null||window.addEventListener("beforeunload",()=>d([])),()=>{s([]),sessionStorage==null||sessionStorage.removeItem("wtoasts"),window==null||window.removeEventListener("storage",a),window==null||window.removeEventListener("beforeunload",()=>d([]))}),[]),E.createPortal(e.jsxs("div",{className:"w-toast",children:[e.jsx("style",{children:D}),t==null?void 0:t.map(o=>n.createElement(T,{...o,key:o.id}))]}),document.body)},z=[5e3,1e4,6e6],K={title:"Toast",component:_,parameters:{layout:"centered"},argTypes:{dismissible:{control:"boolean",defaultValue:!0},duration:{control:{type:"radio"},options:z,description:"Duration of timeout",defaultValue:5e3},text:{control:"text",description:"Toast message content",defaultValue:"This is a toast!"}}},J=({dismissible:t,duration:s,text:a})=>{const[o,i]=n.useState(0),m=r=>{q({text:`${a} #${o}`,variant:r,duration:s,dismissible:t}),i(u=>u+1)};return e.jsx("div",{style:{position:"absolute",top:"16px",left:"16px",display:"flex",flexDirection:"column",gap:"8px"},children:["positive","warning","negative"].map(r=>e.jsxs(b,{type:"button",onClick:()=>m(r),variant:"utility",children:["Show ",r," toast"]},r))})},l={args:{text:"This is a toast!"},render:t=>e.jsxs(e.Fragment,{children:[e.jsx(_,{}),e.jsx(J,{...t})]})};var v,x,f;l.parameters={...l.parameters,docs:{...(v=l.parameters)==null?void 0:v.docs,source:{originalSource:`{
  args: {
    text: 'This is a toast!'
  },
  render: args => <>
      <WToastContainer />
      <ToastDemo {...args} />
    </>
}`,...(f=(x=l.parameters)==null?void 0:x.docs)==null?void 0:f.source}}};const U=["Default"];export{l as Default,U as __namedExportsOrder,K as default};
