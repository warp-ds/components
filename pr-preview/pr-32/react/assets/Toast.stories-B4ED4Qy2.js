import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{r as i}from"./index-BKyFwriW.js";import{c as j}from"./index-FGJkmGnF.js";import{B as f}from"./Button-gaDUg6sw.js";import{W as l}from"./index-CRjnYzPY.js";import{E as k}from"./ExpandTransition-u--UjscD.js";import{r as E}from"./index-C6uLyQP3.js";import"./_commonjsHelpers-CqkleIqs.js";import"./style-DhxcUcNZ.js";import"./index-BAUi5aDK.js";import"./index-DQw2Bw4b.js";const N=".w-toast{--w-toast-color-background: var(--w-s-color-background);--w-toast-color-border: var(--w-s-color-border);--w-toast-color-text: var(--w-s-color-text);--w-toast-color-icon: var(--w-s-color-icon);display:flex;flex-direction:column;position:fixed;bottom:0;overflow:hidden;align-items:center;width:100%;z-index:1000!important;pointer-events:none}.w-toast__item{display:flex;align-items:center;min-width:343px;max-width:420px;padding:8px 8px 8px 6px;margin-bottom:16px;border:2px solid transparent;border-radius:8px;pointer-events:auto;gap:1px;background-color:var(--_w-toast-background);border-color:var(--_w-toast-border);color:var(--_w-toast-text)}.w-toast__icon{margin:8px;color:var(--_w-toast-icon)}.w-toast__icon>*{display:block}.w-toast__button{margin-left:8px}.w-toast__item>p{align-self:center;margin:0 auto 0 0;padding:11px 0;font-size:var(--w-font-size-s);line-height:var(--w-line-height-s)}.w-toast__item{--_w-toast-background: var(--w-toast-background);--_w-toast-border: var(--w-toast-border);--_w-toast-text: var(--w-toast-text);--_w-toast-icon: var(--w-toast-icon)}.w-toast--positive{--w-toast-background: var(--w-s-color-background-positive-subtle);--w-toast-border: var(--w-s-color-border-positive-subtle);--w-toast-icon: var(--w-s-color-icon-positive)}.w-toast--warning{--w-toast-background: var(--w-s-color-background-warning-subtle);--w-toast-border: var(--w-s-color-border-warning-subtle);--w-toast-icon: var(--w-s-color-icon-warning)}.w-toast--negative{--w-toast-background: var(--w-s-color-background-negative-subtle);--w-toast-border: var(--w-s-color-border-negative-subtle);--w-toast-icon: var(--w-s-color-icon-negative)}",I={success:{class:"w-toast--positive",icon:e.jsx(l,{name:"Success"}),role:"status"},warning:{class:"w-toast--warning",icon:e.jsx(l,{name:"Warning"}),role:"alert"},negative:{class:"w-toast--negative",icon:e.jsx(l,{name:"Error"}),role:"alert"}},b=({variant:t,text:s,dismissible:a=!1,id:o,duration:n})=>{const{icon:u,role:r,class:m}=I[t],[y,w]=i.useState(!1);i.useEffect(()=>{w(!0),setTimeout(()=>w(!1),n),setTimeout(()=>p(o),n+400)},[]);const S=j("w-toast__item",m);return e.jsx(k,{show:y,children:e.jsxs("div",{className:S,role:r,id:o,children:[e.jsx("span",{className:"w-toast__icon",children:u}),e.jsx("p",{children:s}),a&&e.jsx(f,{variant:"overlayQuiet",size:"small",hasIconOnly:!0,onClick:()=>p(o),children:e.jsx(l,{name:"Close"})})]})})};b.__docgenInfo={description:"",methods:[],displayName:"ToastItem",props:{variant:{required:!0,tsType:{name:"union",raw:"'success' | 'warning' | 'negative'",elements:[{name:"literal",value:"'success'"},{name:"literal",value:"'warning'"},{name:"literal",value:"'negative'"}]},description:""},duration:{required:!1,tsType:{name:"union",raw:"5000 | 8000 | 10000",elements:[{name:"literal",value:"5000"},{name:"literal",value:"8000"},{name:"literal",value:"10000"}]},description:""},text:{required:!0,tsType:{name:"string"},description:""},dismissible:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},id:{required:!0,tsType:{name:"string"},description:""}}};const D=()=>Date.now().toString(36)+Math.random().toString(36).slice(2,5),T=()=>JSON.parse(sessionStorage.getItem("wtoasts")||"[]"),d=t=>{sessionStorage.setItem("wtoasts",JSON.stringify(t))},C=5e3,h=(t,s)=>{window==null||window.dispatchEvent(new StorageEvent("storage",{key:"wtoasts",newValue:JSON.stringify(s),oldValue:JSON.stringify(t),storageArea:sessionStorage}))},p=t=>{const s=T(),a=s.filter(o=>o.id!==t);d(a),h(s,a)},O=t=>{const s={...t,duration:t.duration||C,id:D()},a=T(),o=[...a,s];d(o),h(a,o)},_=()=>{const[t,s]=i.useState([]),a=o=>{if(o.key==="wtoasts"){const n=JSON.parse(o.newValue||"[]");s(n)}};return i.useEffect(()=>(window==null||window.addEventListener("storage",a),window==null||window.addEventListener("beforeunload",()=>d([])),()=>{s([]),sessionStorage==null||sessionStorage.removeItem("wtoasts"),window==null||window.removeEventListener("storage",a),window==null||window.removeEventListener("beforeunload",()=>d([]))}),[]),E.createPortal(e.jsxs("div",{className:"w-toast",children:[e.jsx("style",{children:N}),t==null?void 0:t.map(o=>i.createElement(b,{...o,key:o.id}))]}),document.body)},V=[5e3,8e3,1e4],R={title:"Toast",component:_,parameters:{layout:"centered"},argTypes:{dismissible:{control:"boolean",defaultValue:!0},duration:{control:{type:"radio"},options:V,description:"Duration of timeout",defaultValue:5e3},text:{control:"text",description:"Toast message content",defaultValue:"This is a toast!"}}},q=({dismissible:t,duration:s,text:a})=>{const[o,n]=i.useState(0),u=r=>{O({text:`${a} #${o}`,variant:r,duration:s,dismissible:t}),n(m=>m+1)};return e.jsx("div",{style:{position:"absolute",top:"16px",left:"16px",display:"flex",flexDirection:"column",gap:"8px"},children:["success","warning","negative"].map(r=>e.jsxs(f,{type:"button",onClick:()=>u(r),variant:"utility",children:["Show ",r," toast"]},r))})},c={args:{text:"This is a toast!"},render:t=>e.jsxs(e.Fragment,{children:[e.jsx(_,{}),e.jsx(q,{...t})]})};var g,v,x;c.parameters={...c.parameters,docs:{...(g=c.parameters)==null?void 0:g.docs,source:{originalSource:`{
  args: {
    text: 'This is a toast!'
  },
  render: args => <>
      <WToastContainer />
      <ToastDemo {...args} />
    </>
}`,...(x=(v=c.parameters)==null?void 0:v.docs)==null?void 0:x.source}}};const G=["Default"];export{c as Default,G as __namedExportsOrder,R as default};
