import{j as c}from"./jsx-runtime-D_zvdyIk.js";import{r as b,R as F}from"./index-DmM0KDA7.js";import{c as te,A as z}from"./index-B7EMQtxt.js";import"./index-BAUi5aDK.js";const re=".slider{height:34px;width:100%;position:relative;-webkit-user-select:none;user-select:none;touch-action:pan-y}.slider--is-disabled{pointer-events:none;opacity:.6}.slider__track-inactive{position:absolute;height:3px;bottom:14px;width:100%;background:var(--w-s-color-background-disabled-subtle);border-radius:4px}.slider__track-active{position:absolute;height:5px;bottom:13px;background:var(--w-s-color-background-primary);border-radius:4px}.slider__thumb{background-color:var(--w-s-color-background-primary);border:8px solid var(--w-s-color-border-primary);border-radius:50%;height:13px;width:13px;position:absolute;bottom:2px;box-sizing:content-box;cursor:pointer;-webkit-tap-highlight-color:transparent}.slider__thumb:focus,.slider__thumb:hover{outline:none;padding:3px;border-width:5px;box-shadow:var(--w-shadow-slider-handle-hover)}";var t=(n=>(n[n.Lower=0]="Lower",n[n.Upper=1]="Upper",n))(t||{});function y(n,a,e){return Math.min(Math.max(n,a),e)}function S(n,a,e,u){if(u){const h=(e-a)/2;return u.invertExtent(n)[n>h?1:0]}return y((n-a)/(e-a),0,1)}function R(n,a,e,u,h){if(h)return h(n);let r=(e-a)*n;return r=Math.round(r/u)*u+a,y(a,r,e)}function ne(n,a,e){if(!e)return n+a;const u=e.invertExtent(n)[1],h=e.thresholds().find(r=>r>=u)??1;return e(h)}function ae(n,a,e){if(!e)return n-a;const u=e.invertExtent(n)[0],h=e.thresholds().reverse().find(r=>r<u)??0;return e(h)}function oe(n,a){const e="500px",[u,h]=b.useState(e);return b.useLayoutEffect(()=>{var r;h(e-(((r=a.current)==null?void 0:r.offsetWidth)??0))},[e,a]),u}const Q=({className:n,disabled:a=!1,value:e,onInput:u=()=>{},onChange:h=()=>{},max:r=100,min:l=0,scale:p,step:v=1,...L})=>{var M,X,O,$,K,P;const D=b.useRef(null),_=b.useRef(null),T=b.useRef(null);oe(D,_);const[Y,q]=b.useState(!1),[Z,I]=b.useState(!1),[g,A]=b.useState({lower:S(e[t.Lower],l,r,p),upper:S(e[t.Upper],l,r,p)}),x=b.useRef([...e]),[ee,N]=b.useState(!1),U=b.useRef(null);b.useEffect(()=>{A({lower:S(e[t.Lower],l,r,p),upper:S(e[t.Upper],l,r,p)}),x.current=[...e]},[e,l,r,p]);const W=(o,i)=>{if(e[i]!==o){const d=e.slice();d[i]=o,h(d)}},C=(o,i=t.Lower)=>{if(a)return;const d=e[i];let s;switch(o.key){case"ArrowLeft":case"ArrowDown":case"PageDown":s=ae(d,v,p);break;case"ArrowUp":case"ArrowRight":case"PageUp":s=ne(d,v,p);break;case"Home":s=l;break;case"End":s=r;break}if(s!=null){s=y(s,i===t.Lower?l:e[t.Lower],i===t.Upper?r:e[t.Upper]);const f=e.slice();f[i]=s,u(f),W(s,i),o.preventDefault(),o.stopPropagation()}},H=o=>{var m;if(a)return;_.current===o.target?q(!0):T.current===o.target&&I(!0);let i=0;"touches"in o?i=o.touches[0].clientX:i=o.clientX;const d=(m=D.current)==null?void 0:m.getBoundingClientRect();if(!d)return;const s=y((i-d.left)/d.width,0,1);let f;if(e[t.Lower]===r)f=t.Lower;else if(e[t.Upper]===l)f=t.Upper;else{const j=Math.abs(g.lower-s),w=Math.abs(g.upper+1e-4-s);f=j<w?t.Lower:t.Upper}U.current={handle:f,sliderRect:d},N(!0),"touches"in o?(document.addEventListener("touchmove",k,{passive:!1}),document.addEventListener("touchend",V)):(document.addEventListener("mousemove",k),document.addEventListener("mouseup",V)),o.preventDefault()},k=o=>{let i=0;if(o instanceof TouchEvent)if(o.touches.length>0)i=o.touches[0].clientX;else return;else i=o.clientX;const d=U.current;if(!d)return;const{handle:s,sliderRect:f}=d;let m=y((i-f.left)/f.width,0,1);if(s===t.Lower){const w=S(x.current[t.Upper],l,r,p);m=y(m,0,w)}else{const w=S(x.current[t.Lower],l,r,p);m=y(m,w,1)}const j=R(m,l,r,v,p);j!==x.current[s]&&(x.current[s]=j,u([...x.current]),A(w=>s===t.Lower?{...w,lower:m}:{...w,upper:m})),o.preventDefault()},V=o=>{var d,s;o instanceof TouchEvent?(document.removeEventListener("touchmove",k),document.removeEventListener("touchend",V)):(document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",V)),q(!1),I(!1);const i=U.current;if(i){const{handle:f}=i,m=x.current[f];W(m,f),f===t.Lower?(d=_.current)==null||d.focus():(s=T.current)==null||s.focus()}N(!1),U.current=null,o.preventDefault()};return c.jsxs(c.Fragment,{children:[c.jsx("style",{href:"Slider",precedence:"medium",children:re}),c.jsxs("div",{onMouseDown:H,onTouchStart:H,"data-body-scroll-lock-ignore":!0,className:te("slider",{"slider--is-disabled":a},n),style:{cursor:ee?"grabbing":"pointer"},ref:D,children:[c.jsx("div",{className:"slider__track-inactive"}),c.jsx("div",{className:"slider__track-active",style:{left:`${g.lower*100}%`,right:`${(1-g.upper)*100}%`}}),c.jsx("div",{"aria-disabled":a,"aria-label":(M=L["aria-label"])==null?void 0:M[t.Lower],"aria-labelledby":(X=L["aria-labelledby"])==null?void 0:X[t.Lower],"aria-valuemax":e[t.Upper],"aria-valuemin":l,"aria-valuenow":R(g.lower,l,r,v,p),"aria-valuetext":(O=L["aria-valuetext"])==null?void 0:O[t.Lower],className:"slider__thumb",onKeyDown:C,role:"slider",ref:_,style:{left:`${g.lower*100}%`,cursor:"inherit"},tabIndex:a?void 0:0}),c.jsx(z,{tooltip:!0,placement:"top",flip:!0,targetEl:_,isShowing:Y,children:c.jsx("p",{id:"tooltip-bubbletext",children:R(g.lower,l,r,v,p)})}),c.jsx("div",{"aria-disabled":a,"aria-label":($=L["aria-label"])==null?void 0:$[t.Upper],"aria-labelledby":(K=L["aria-labelledby"])==null?void 0:K[t.Upper],"aria-valuemax":r,"aria-valuemin":e[t.Lower],"aria-valuenow":R(g.upper,l,r,v,p),"aria-valuetext":(P=L["aria-valuetext"])==null?void 0:P[t.Upper],className:"slider__thumb",onKeyDown:o=>C(o,t.Upper),role:"slider",ref:T,style:{right:`${(1-g.upper)*100}%`,cursor:"inherit"},tabIndex:a?void 0:0}),c.jsx(z,{tooltip:!0,placement:"top",flip:!0,noArrow:!0,targetEl:T,isShowing:Z,children:c.jsx("p",{id:"tooltip-bubbletext",children:R(g.upper,l,r,v,p)})})]})]})};Q.__docgenInfo={description:"",methods:[],displayName:"RangeSlider",props:{"aria-label":{required:!1,tsType:{name:"tuple",raw:"[string, string]",elements:[{name:"string"},{name:"string"}]},description:"String value that labels the slider."},"aria-labelledby":{required:!1,tsType:{name:"tuple",raw:"[string, string]",elements:[{name:"string"},{name:"string"}]},description:"Identifies the element that labels the slider."},"aria-valuetext":{required:!1,tsType:{name:"tuple",raw:"[string, string]",elements:[{name:"string"},{name:"string"}]},description:"Human readable text alternative for the value."},className:{required:!1,tsType:{name:"string"},description:"Additional CSS class for the container."},disabled:{required:!1,tsType:{name:"boolean"},description:"Whether the slider is disabled.",defaultValue:{value:"false",computed:!1}},onInput:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: [number, number]) => void",signature:{arguments:[{type:{name:"tuple",raw:"[number, number]",elements:[{name:"number"},{name:"number"}]},name:"value"}],return:{name:"void"}}},description:"Handler that is called every time the value of the slider changes.",defaultValue:{value:"() => {}",computed:!1}},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: [number, number]) => void",signature:{arguments:[{type:{name:"tuple",raw:"[number, number]",elements:[{name:"number"},{name:"number"}]},name:"value"}],return:{name:"void"}}},description:"Handler that is called when the value of the slider has settled.",defaultValue:{value:"() => {}",computed:!1}},max:{required:!1,tsType:{name:"number"},description:"The greatest value in the range of permitted values.",defaultValue:{value:"100",computed:!1}},min:{required:!1,tsType:{name:"number"},description:"The lowest value in the range of permitted values.",defaultValue:{value:"0",computed:!1}},scale:{required:!1,tsType:{name:"Scale"},description:`A d3-scale object for non linear slider scales.
@see d3-scale repository https://github.com/d3/d3-scale`},step:{required:!1,tsType:{name:"number"},description:"Specifies the value granularity.",defaultValue:{value:"1",computed:!1}},value:{required:!0,tsType:{name:"tuple",raw:"[number, number]",elements:[{name:"number"},{name:"number"}]},description:"The current value"}}};const de={title:"Forms/Slider-v2"},E=()=>{const[n,a]=F.useState([1e6,1e7]),[e,u]=F.useState(n);return c.jsxs("div",{style:{paddingTop:"0px"},children:[c.jsxs("output",{children:[e[0]," - ",e[1]," kr"]}),c.jsx(Q,{onChange:a,onInput:u,min:1e6,max:1e7,step:5e4,value:n})]})};E.__docgenInfo={description:"",methods:[],displayName:"Wrapper"};var B,G,J;E.parameters={...E.parameters,docs:{...(B=E.parameters)==null?void 0:B.docs,source:{originalSource:`() => {
  const [value, setValue] = React.useState<[number, number]>([1000000, 10000000]);
  const [output, setOutput] = React.useState(value);
  return <div style={{
    paddingTop: '0px'
  }}>
      <output>
        {output[0]} - {output[1]} kr
      </output>
      <RangeSlider onChange={setValue} onInput={setOutput} min={1000000} max={10000000} step={50000} value={value} />
    </div>;
}`,...(J=(G=E.parameters)==null?void 0:G.docs)==null?void 0:J.source}}};const ce=["Wrapper"];export{E as Wrapper,ce as __namedExportsOrder,de as default};
